<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Advanced</title>
  </head>
  <body>
    <img
      src="https://www.kasandbox.org/programming-images/creatures/OhNoes.png"
      alt="not found"
      id="ohnoes"
    />
    <h1><span id="countdown">5</span> Seconds Left</h1>
    <span id="info"></span>

    <script>
      let ohnoes = document.getElementById("ohnoes");
      ohnoes.style.width = "50px";

      let countdown = document.getElementById("countdown");
      function timeBomb(evt) {
        let currentTime = parseFloat(countdown.textContent);
        if (currentTime > 0) {
          countdown.textContent = currentTime - 1;
        } else {
          window.clearInterval(timer);
        }
      }
      let timer = window.setInterval(timeBomb, 1000);

      let info = document.getElementById("info");
      function infoFunc() {
        info.innerHTML = ohnoes.style.width;
      }

      let startTime = new Date().getTime();
      function makeItBigger() {
        let currTime = new Date().getTime();
        let newWidth = 50 + ((currTime - startTime) / 1000) * 50;
        ohnoes.style.width = newWidth + "px";

        console.log(newWidth);

        if (newWidth < 100) {
          requestAnimationFrame(makeItBigger);
          if (newWidth >= 100) {
            cancelAnimationFrame(makeItBigger);
          }
        } else {
          makeItSmaller();
        }
      }

      // let startTimeSm = new Date().getTime();
      function makeItSmaller() {
        let currTimeSm = new Date().getTime();
        let newWidth = 100 - ((currTimeSm - startTime) / 1000) * 50;
        ohnoes.style.width = newWidth + "px";

        console.log(newWidth + " Smaller");
        if (newWidth < 50) {
          newWidth = 50;
        }

        if (newWidth >= 50) {
          requestAnimationFrame(makeItSmaller);
          if (newWidth <= 50) {
            cancelAnimationFrame(makeItSmaller);
          }
        } else {
        }
      }
      infoFunc();
      makeItBigger();
    </script>
  </body>
</html>
